{{#extend "stylesheets"}} {{/extend}}

<div class="modal" id="modal-login">
    <div class="modal-inner">
        <div class="modal-content">
            <div class="modal-close-icon">
                <a href="javascript:void(0)"><i class="fa fa-times close-modal" aria-hidden="true"></i></a>
            </div>
            <div class="modal-content-inner">
                <h4>Login</h4>
                <div class="form-content">
                    <form id="login-form" action="index.html" method="post">
                        <div class="form-group">
                            <label for="login-email">Email</label>
                            <div class="input-helpers">
                                <input type="email" id="login-email"  class="u-full-width" name="email" class="u-full-width" value>
                                <span class="field-error"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="login-password">Password</label>
                            <div class="input-helpers">
                                <input type="password" id="login-password"  class="u-full-width" name="password" value>
                                <span class="field-error"></span>
                            </div>
                        </div>
                    </form>
                </div>
                <p>No account? <a id="link-register" href="#">Create one now</a></p>
            </div>
            <hr class="modal-buttons-separator">
            <div class="modal-buttons">
                <button class="button button-cancel close-modal">Cancel</button>
                <button class="button button-primary close-modal">OK</button>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="modal-register">
    <div class="modal-inner">
        <div class="modal-content">
            <div class="modal-close-icon">
                <a href="javascript:void(0)" class="close-modal"><i class="fa fa-times" aria-hidden="true"></i></a>
            </div>
            <div class="modal-content-inner">
                <h4>Register</h4>
                <div class="form-content">
                    <form id="register-form" action="index.html" method="post">
                        <div class="form-group">
                            <label for="register-name">Name</label>
                            <div class="input-helpers">
                                <input type="text" id="register-name" class="u-full-width" name="name" value>
                                <span class="field-error"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="register-email">Email</label>
                            <div class="input-helpers">
                                <input type="email" id="register-email" class="u-full-width" name="email" value>
                                <span class="field-error"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="register-password">Password</label>
                            <div class="input-helpers">
                                <input type="password" id="register-password" class="u-full-width" name="password" value>
                                <span class="field-error"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="register-password">Confirm Password</label>
                            <div class="input-helpers">
                                <input type="password" id="register-password" class="u-full-width" name="password" value>
                                <span class="field-error"></span>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <hr class="modal-buttons-separator">
            <div class="modal-buttons">
                <button class="button button-cancel close-modal">Cancel</button>
                <button class="button button-primary close-modal">OK</button>
            </div>
        </div>
    </div>
</div>

<header class="navbar">
    <div class="navbar-container">
        <div class="navbar-logo">
            <a href="/">ROADRUNNER</a>
        </div>
        <div class="navbar-left">
            <ul class="navbar-links">
                <li><a href="#">Explore</a></li>
                <li><a href="#">Create</a></li>
                <li><a href="#">My Lists</a></li>
            </ul>
        </div>
        <div class="navbar-right">
            <ul class="navbar-links">
                <li><a id="navbar-login" href="#">Log In</a></li>
                <li><a href="#">Favorites</a></li>
                <li><a href="#">Profile</a></li>
            </ul>
        </div>
        <div class="navbar-menu">
        	<i class="fa fa-bars" aria-hidden="true"></i>
        </div>
    </div>
</header>

<main>
    <div id="map-container">
        <div id="map"></div>
    </div>
    <div id="side-menu">
        <section id="side-menu-content">
            <h4>Popular Lists Near You</h4>
            <hr id="border">
            <h5><strong>La Jolla Day Trip</strong></h5>
            <p id="desc"><strong>Destinations</strong>
                <!--<br>Select* the places you want to visit & click submit to see the suggested path starting from your current location.
		        <br><span id="instr">*Ctrl+Click or Cmd+Click for multiple selection</span></p>
		        <select multiple id="waypoints">
		          <option value="7702 Fay Ave, La Jolla, CA 92037">The Cottage</option>
		          <option value="8300 Camino Del Oro, La Jolla, CA 92037">La Jolla Shores</option>
		          <option value="1100 Coast Blvd, La Jolla, San Diego, CA 92037">La Jolla Cove</option>
		          <option value="3750 Sports Arena Blvd, San Diego, CA 92110">Phil's BBQ</option>
		        </select>-->
                <br>Click submit to see the suggested path starting from your current location. Drag & reorder places for different paths.
                <div id="list-container">
                    <ul id="waypoints" style="list-style-type: none;">
                        <li data-value="7702 Fay Ave, La Jolla, CA 92037" class="points" draggable="true">The Cottage</li>
                        <li data-value="8300 Camino Del Oro, La Jolla, CA 92037" class="points" draggable="true">La Jolla Shores</li>
                        <li data-value="1100 Coast Blvd, La Jolla, San Diego, CA 92037" class="points" draggable="true">La Jolla Cove</li>
                        <li data-value="3750 Sports Arena Blvd, San Diego, CA 92110" class="points" draggable="true">Phil's BBQ</li>
                    </ul>
                </div>
                <br>
                <input type="submit" id="submit">
                <div id="directions-panel"></div>
        </section>
    </div>
</main>
{{#extend "scripts"}}
<!--<script>
var map, infoWindow, currPos, currPosMarker;

function initMap() {
    var directionsService = new google.maps.DirectionsService;
    var directionsDisplay = new google.maps.DirectionsRenderer;
    map = new google.maps.Map(document.getElementById('map'), {
        center: {
            lat: 32.8801,
            lng: -117.2340
        },
        zoom: 13,
        styles: mapStyle
    });
    infoWindow = new google.maps.InfoWindow;

    // Try HTML5 geolocation.
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
                lat: position.coords.latitude,
                lng: position.coords.longitude
            };

            // infoWindow.setPosition(pos);
            // infoWindow.setContent('Location found.');
            // infoWindow.open(map);
            map.setCenter(pos);
            currPos = pos;

            currPosMarker = new google.maps.Marker({
                position: currPos,
                map: map,
                title: 'You are here.',
                animation: google.maps.Animation.DROP,
                visible: true
            });

            infoWindow.setContent('You are here.');
            infoWindow.open(map, currPosMarker);

            currPosMarker.addListener('click', function() {
                if (currPosMarker.open) {
                    infoWindow.open(map, currPosMarker);
                    currPosMarker.open = false;
                } else {
                    infoWindow.close();
                    currPosMarker.open = true;
                }
            });
        }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
        });
    } else {
        // Browser doesn't support Geolocation
        handleLocationError(false, infoWindow, map.getCenter());
    }

    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById('directions-panel'));

    document.getElementById('submit').addEventListener('click', function() {
        // hide current location's marker
        currPosMarker.setVisible(false);
        infoWindow.close();
        currPosMarker.open = true;

        calculateAndDisplayRoute(directionsService, directionsDisplay, currPos);
    });
}

function handleLocationError(browserHasGeolocation, infoWindow, pos) {
    infoWindow.setPosition(pos);
    infoWindow.setContent(browserHasGeolocation ?
        'Error: The Geolocation service failed.' :
        'Error: Your browser doesn\'t support geolocation.');
    infoWindow.open(map);
}

function calculateAndDisplayRoute(directionsService, directionsDisplay, pos) {
    var waypts = [];
    var checkboxArray = document.getElementById('waypoints');
    for (var i = 0; i < checkboxArray.length; i++) {
        if (checkboxArray.options[i].selected) {
            waypts.push({
                location: checkboxArray[i].value,
                stopover: true
            });
        }
    }

    waypts.slice(-1)[0].stopover = false;

    directionsService.route({
        origin: currPos,
        destination: waypts.slice(-1)[0].location,
        waypoints: waypts,
        optimizeWaypoints: true,
        travelMode: 'DRIVING'
    }, function(response, status) {
        if (status === 'OK') {
            directionsDisplay.setDirections(response);
            /*var route = response.routes[0];
		      var summaryPanel = document.getElementById('directions-panel');
		      summaryPanel.innerHTML = '';
		      // For each route, display summary information.
		      for (var i = 0; i < route.legs.length; i++) {
		        var routeSegment = i + 1;
		        if (route.legs[i].start_address == route.legs[i].end_address) {
		        	break;
		        }
		        summaryPanel.innerHTML += '<b>Route Segment: ' + routeSegment +
		            '</b><br>';
		        summaryPanel.innerHTML += route.legs[i].start_address + ' to ';
		        summaryPanel.innerHTML += route.legs[i].end_address + '<br>';
		        summaryPanel.innerHTML += route.legs[i].distance.text + '<br><br>';
    		}*/
        } else {
            window.alert('Directions request failed due to ' + status);
        }
    });
}
</script>-->
<script type="text/javascript" src="/javascripts/map.js"></script>
<script type="text/javascript" src="/javascripts/modal.js"></script>
<script type="text/javascript" src="/javascripts/main.js"></script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD7l3pxQ6dq-Kgg-aVUO6-A0zf2swG2Cec&callback=initMap">
</script>
{{/extend}}
